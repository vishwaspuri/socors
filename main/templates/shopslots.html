{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/shopslots.css' %}">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha256-L/W5Wfqfa0sdBNIKN9cG6QA5F2qx4qICmU2VgLruv9Y="
      crossorigin="anonymous"
    />
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.1/css/all.css" integrity="sha384-xxzQGERXS00kBmZW/6qxqJPyxW3UR0BPsL4c8ILaIWXva5kFi7TxkIIaMiKtqV1Q" crossorigin="anonymous">

    <title>Time Slots</title>
</head>
<body>
    <nav class="navbar navbar-expand-xxl navbar-dark bg justify-content-xxl-start fixed-top">
        <a class="navbar-brand order-0 ml-xxl-0 ml-2 mr-auto" href="{% url 'main:menu' %}">SOCORS</a>
        <a id="explore_page" class="mr-3" href="{% url 'main:explore' %}"><span class="fas fa-home" id="home"></span></a>
        <a id="notification" href="{% url 'main:notifications' %}"><span class="fas fa-bell" id="bell"></span>
          <!-- <span class="badge badge-danger rounded-circle" id="bell_num">5</span> -->
          <!-- if no notification -->
          <!-- <span class="badge badge-danger rounded-circle invisible">5</span> -->
        </a> 
        <button id="tri" class="navbar-toggler align-self-start" type="button">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse d-flex flex-column flex-xxl-row bg mobileMenu" id="navbarSupportedContent">
          
          <div class="picture">
            <img src="{% static 'images/user_dp.png' %}" alt="profile_picture" class="dp">
            <p id="nav_name" class="mb-0">{{ user.full_name }}<a href="{% url 'user:update-profile' %}"> <img id="edit_name" src="{% static 'images/edit_icon.png' %}" alt=""></a></p></p>
          </div>

          <div class="list">
            <ul class="navbar-nav align-self-stretch" id="menu">
              <li class="nav-item">
                <a class="link" href="{% url 'user:profile' %}">My Profile</a>
              </li>
			  <li class="nav-item">
                <a class="link" href="{% url 'main:explore' %}">Home</a>
              </li>
              <li class="nav-item">
                <a class="link" href="{% url 'main:menu' %}">Explore</a>
              </li>
              <li class="nav-item">
                <a class="link" href="{% url 'main:mytimeslots' %}" tabindex="-1" aria-disabled="true">My Timeslots</a>
              </li>
              <li class="nav-item">
                <a class="link" href="{% url 'user:add-address' %}" tabindex="-1" aria-disabled="true">Add Address</a>
              </li>
              <li class="nav-item">
                <a class="link" href="{% url 'main:notifications' %}" tabindex="-1" aria-disabled="true">Notifications</a>
              </li>
              <li class="nav-item">
                <a class="link" tabindex="-1" aria-disabled="true" href="#" data-toggle="modal" data-target="#ContactUsModal">Contact Us</a>
              </li>
              <li class="nav-item">
                <a class="link" href="{% url 'user:logout' %}" tabindex="-1" aria-disabled="true">Logout</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!--Contact Us Modal-->

		<div id="ContactUsModal" class="modal fade" role="dialog">
			<div class="modal-dialog-centered modal-dialog" role="content">
				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header justify-content-center pt-1 pb-0 bg-primary">
						<h4 class="row text-white">Contact Us at</h4>	
					</div>
					<div class="modal-body pt-2">
            <div class="row">
              <p class="text-center w-100 mb-2">For feedback and suggestions</p>
            </div>
            <div class="align-items-center mb-1 ml-5 row">
              <i class="fa-whatsapp-square fab text-success" style="font-size: 30px;" aria-hidden="true"></i>
              <span class="pl-2" style="font-size: 15px;">+91-7042676330</span>
            </div>
            <div class="align-items-center ml-5 row">
              <a href = "mailto: socorsnearyou@gmail.com" class="text-danger">
                <i class="fas fa-envelope" style="font-size: 30px;" aria-hidden="true"></i>
              </a>
              <span class="pl-2 mb-1" style="font-size: 15px;">socorsnearyou@gmail.com</span>                
            </div>
        </div>
				</div>
			</div>
		</div>
    <div class="overlay"></div>
    <div class="content">
        <h1 id="h1" class="d-flex justify-content-center h1margin">{{ shop.shop_name }}</h1>
        <div id="remarks" class="pb-1 pt-1">
          <div class="remark1">
            <ul class="pl-3 mb-0">
              <p class="mb-1 text-left"><strong>Shopkeeper's Remark</strong></p>
              <li>{{ shop.owners_remark }}</li>
            </ul>
          </div>
          <div class="remark2">
            <ul class="list-unstyled mb-0">
              <p class="mb-1 pl-3 text-left"><strong>Online Payment Options</strong></p>
							<li>
								<img src="{% static 'images/Paytm.png' %}" alt="Paytm">
								<span>{{ user.paytm_number }}</span>
							</li>
							<li>
								<img src="{% static 'images/GPay.png' %}" alt="GPay">
								<span>{{ user.gpay_number }}</span>
							</li>
							<li>
								<img src="{% static 'images/PhonePe.png' %}" alt="PhonePe">
								<span>{{ user.phonepe_number }}</span>
							</li>
						</ul>
          </div>
        </div>
        
        <div class="header d-flex align-items-start">
                <h5>Timeslots</h5>
        </div>
        <div class="header d-flex align-items-start">
                <h5>Date: {{ date }}</h5>
        </div>
        <table style="margin-left:auto;margin-right:auto;">
        {% for slot in slots %}

            {% with block_class=slot.class_name %}

        {% if forloop.counter0|divisibleby:3 %}<tr>{% endif %}
                    {% if slot.is_slot_in_shop_time %}
                        {% if slot.num_entries_left %}
                            <td><button type="submit" class="bt" data-toggle="modal" data-target=".{{ block_class }}">{{ slot.slot_start_time|time }}- {{ slot.slot_stop_time|time }}</button></td>
                        {% else %}
                            <td><button type="button" class="bt btn-danger" disabled>{{ slot.slot_start_time|time }}- {{ slot.slot_stop_time|time }}</button></td>
                        {% endif %}
                    {% else %}
                        {% if slot.num_entries_left %}
                            <td><button type="button" class="bt" disabled>{{ slot.slot_start_time|time }}- {{ slot.slot_stop_time|time }}</button></td>
                        {% else %}
                            <td><button type="button" class="bt btn-danger" disabled>{{ slot.slot_start_time|time }}- {{ slot.slot_stop_time|time }}</button></td>
                        {% endif %}
                    {% endif %}
        {% if forloop.counter|divisibleby:3 or forloop.last %}</tr>{% endif %}
        <div class="{{ block_class }} modal fade pickup-or-buy" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <form action="{% url 'main:pick-up-form' slot_id=slot.slot_id %}" method="get">
                            <button class="btn btn-info" type="submit">Delivery</button>
                        </form>
                        <br>
                        <br>
                        <form method="post" action="{% url 'main:buy-in' slot.slot_id %}">
                            {% csrf_token %}
                            <input type="hidden" name="next" value="{{ next }}" />
                            <input class="btn btn-info" type="submit" value="Buy-in" id="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>
            {% endwith %}
        {% endfor %}
        </table>
    <div class="row">
        <div class="col-4">
            <p class="lgn"><img src="{% static 'images/avail.png' %}" alt="" class="lg">Available</p>
        </div>
        <div class="col-4">
            <p class="lgn"><img src="{% static 'images/full.png' %}" alt="" class="lg">Full</p>
        </div>
    </div>
    </div>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Feedback for your previous order</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="">
          <textarea name="" class="feedback" id="" cols="30" rows="10"></textarea>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="">Cancel</button>
        <button type="button" class="btn btn-info" data-toggle="modal" data-target="">Submit</button>
      </div>
    </div>
  </div>
</div>
    <script
			  src="https://code.jquery.com/jquery-3.5.1.min.js"
			  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
              crossorigin="anonymous"></script>
              
              <script
              src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"
              integrity="sha256-OUFW7hFO0/r5aEGTQOz9F/aXQOt+TwqI1Z4fbVvww04="
              crossorigin="anonymous"
            ></script>
    <script src="{% static 'js/mytimeslots.js' %}"></script>
</body>
</html>
